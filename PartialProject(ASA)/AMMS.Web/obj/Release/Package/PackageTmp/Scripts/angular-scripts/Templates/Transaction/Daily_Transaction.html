<div class="row panel panel-default panel-primary" ng-controller="dailyTransactionController">
    <div class="panel-heading panel-title">
        Daily Transactions
    </div>


    <div class="row">
        <div class="form-inline col-sm-12 col-md-6 col-lg-6 pull-left">
            <label><i class="fa fa-asterisk required-icon"></i> Required field</label>
        </div>
        <div class="form-inline col-sm-12 col-md-6 col-lg-6">
            <label ng-if="currentTransaction.IsRealized" class="pull-right" ng-model="isCommited" style="color: blue; font-size: medium;">Realized</label>
            <label ng-if="!currentTransaction.IsRealized" class="pull-right" ng-model="isCommited" style="color: red; font-size: medium;">Realizable</label>
        </div>
    </div>



    <div class="panel-body font-asa-11">

        <form angular-validator-submit="saveDailyTransaction()" name="dailyTransaction" class="form-horizontal" novalidate angular-validator>

            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-12 form-group ">
                    <div class="form-group">
                        <div class="form-inline">
                            <label for="tdate" class="col-lg-5 col-md-5 col-sm-12">
                                Date <i class="fa fa-asterisk required-icon"></i>
                            </label>
                            <!--<div class="dropdown input-group date col-lg-5 col-md-5 col-sm-12">
                                <a class="dropdown-toggle" id="tdate" role="button" data-toggle="dropdown" data-target="#" href="#">
                                    <div class="input-group date-input-group">
                                        <input type="text" name="tdate" readonly="readonly" date-time-input="DD-MM-YYYY" class="form-control-asa full-width-asa" ng-model="currentTransaction.TransactionDate" ng-init="currentTransaction.TransactionDate=branchWorkingDay"
                                               is-open="false" required style="margin-left: -40px;">
                                        <span class="input-group-addon input-group-addon-asa"><i class="fa fa-calendar" style="margin-left: -40px;"></i></span>
                                    </div>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <datetimepicker ng-model="currentTransaction.TransactionDate" data-datetimepicker-config="{ startView:'day', minView:'day',dropdownSelector: '#tdate' }" required
                                                    ng-change="isHolidayOrOffDay(currentTransaction.TransactionDate)"/>
                                </ul>
                            </div>-->
                            <div class="dropdown input-group date col-lg-5 col-md-5 col-sm-12">
                                <p class="input-group">
                                    <input readonly="readonly" class="form-control-asa full-width-asa" type="text" uib-datepicker-popup="{{format}}"
                                           ng-change="isHolidayOrOffDay(currentTransaction.TransactionDate)"
                                           ng-model="currentTransaction.TransactionDate" is-open="popup.opened" datepicker-options="dateOptions" required required-message="'opening date is required'" close-text="Close"
                                           alt-input-formats="altInputFormats"style="margin-left: -40px; width: 100px;"
                                           />
                                    <span class="input-group-addon input-group-addon-asa" style="margin-left: -40px;">
                                        <button type="button" ng-click="open()"><i class="fa fa-calendar"></i></button>
                                    </span>
                                </p>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-12">
                    <div class="form-group">
                        <div class="form-inline">
                            <label class="col-lg-7 col-md-7 col-sm-12">Process<i class="fa fa-asterisk required-icon"></i></label>
                            <select ng-model="currentTransaction.Process" class="col-lg-6 col-md-6 col-sm-12 form-control form-control-asa" style="margin-left: -20px;"
                                    ng-options="transactionProcess.Value as transactionProcess.Name for transactionProcess in transactionProcessList"
                                    ng-change="transactionProcessChange();"></select>
                        </div>
                    </div>
                </div>

                <span ng-repeat="command in commandList">
                    <span ng-if="command.IsGeneral === true">
                        <button class="btn btn-primary" type="button" ng-click="getMemberDailyTransaction(currentTransaction.TransactionDate)">
                            <span>{{command.CommandName}}</span>
                        </button>
                    </span>
                </span>
                <button type="submit" id="btnSaveDailyTransaction" class="btn btn-primary" ng-hide="selectedDate>maxDate || selectedDate<minDate || !btnSave" ng-click="saveDailyTransaction()">
                    Save
                </button>


            </div>
            <div class="row" ng-if="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                <div class="form-group">
                    <div class="form-inline">
                        <label class="col-lg-1 col-md-1 col-sm-12">
                            Bank
                        </label>
                        <select ng-model="currentTransaction.BankAccount" class="col-lg-3 col-md-3 col-sm-12 form-control form-control-asa" style="margin-left: -35px;"
                                ng-options="bankAccount.Value as bankAccount.Name for bankAccount in bankAccounts">
                            <option value="">Select Bank</option>
                        </select>
                        <label class="col-lg-1 col-md-1 col-sm-12">
                            Cheque
                        </label>
                        <input type="text" ng-model="currentTransaction.ChequeNo" placeholder="Cheque Number" class="col-lg-4 col-md-4 col-sm-12 form-control form-control-asa" />
                        <label class="col-lg-2 col-md-2 col-sm-12">
                            Is Account Payable?
                        </label>
                        <input type="checkbox" ng-model="currentTransaction.IsAccountPayable"
                               ng-true-value="true" ng-false-value="false">
                    </div>
                </div>
            </div>

            <fieldset ng-hide="currentTransaction.LoanTransactions.length<=0">
                <h5><u>Loan Programs</u></h5>
                <center>
                    <div ng-repeat="lt in currentTransaction.LoanTransactions">
                        <div style="color: red" ng-bind-html="lt.errorMessage">{{lt.errorMessage}}</div>
                        <div style="color: green" ng-bind-html="lt.warningMessage">{{lt.warningMessage}}</div>
                        <div ng-repeat="slt in lt.SingleLoanTransactions">
                            <div style="color: red" ng-bind-html="slt.errorMessage">{{slt.errorMessage}}</div>
                            <div style="color: green" ng-bind-html="slt.warningMessage">{{slt.warningMessage}}</div>
                        </div>
                    </div>
                </center>
                <div class="panel-body" style="width: 103%;">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div>
                            <label class="col-lg-2 col-md-2 col-sm-2 vertical-line">Program</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Outstanding</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Overdue</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Collected</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Collection</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Late Fee Recieved</label>
                        </div>
                        <div>
                            <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Late Fee</label>
                        </div>
                        <div ng-switch="currentTransaction.Process">
                            <span ng-switch-when="2">
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line" style="visibility: hidden">Exempted</label>
                            </span>
                            <span ng-switch-default>
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Exempted</label>
                            </span>
                        </div>
                        <div ng-switch="currentTransaction.Process">
                            <span ng-switch-when="2">
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line" style="visibility: hidden">Exemption</label>
                            </span>
                            <span ng-switch-default>
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Exemption</label>
                            </span>
                        </div>
                        <div ng-switch="currentTransaction.Process">
                            <span ng-switch-when="2">
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line" style="visibility: hidden">Exemptable</label>
                            </span>
                            <span ng-switch-default>
                                <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Exemptable</label>
                            </span>
                        </div>

                        <div ng-repeat="lp in currentTransaction.LoanTransactions">
                            <div class="row" ng-style="lp.rowStyleL">
                                <div>
                                    <input type="text" readonly="readonly" class="col-lg-2 col-md-2 col-sm-2" title="{{lp.ProductName}}" ng-model="lp.ProductShortName" />
                                </div>
                                <div>
                                    <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="lp.OutstandingAmount" />
                                </div>
                                <div>
                                    <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="lp.Overdue" />
                                </div>
                                <div ng-switch="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanCollection).TransactionId">
                                    <span ng-switch-when="-1">
                                        <input type="text"
                                                min="0" 
                                               id="collected{{$index}}"
                                                readonly="readonly"
                                                class="col-lg-1 col-md-1 col-sm-2"
                                                ng-model="lp.Realisable"
                                                ng-init="lp.Realisable=0"
                                               ng-style="lp.cellStyleLoanCollection" />
                                    </span>
                                    <span ng-switch-default>
                                        <input type="text" 
                                               id="collected1{{$index}}" 
                                               readonly="readonly"
                                                class="col-lg-1 col-md-1 col-sm-2" 
                                               ng-model="lp.Realisable"
                                                ng-init="lp.Realisable=getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanCollection).Amount"
                                               ng-style="lp.cellStyleLoanCollection" />
                                    </span>
                                </div>
                                <div>
                                    <input type="text"
                                           min="0"
                                           id="realisable{{$index}}"
                                           class="col-lg-1 col-md-1 col-sm-2 editable-input-number" 
                                           title="Today's Realisable Amount {{getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanCollection).Amount}}"
                                           ng-model="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanCollection).Amount"
                                           ng-change="singleTransactionLoan($index,getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanCollection));calculateGrandTotal();"
                                           ng-disabled="lp.LoanAccountStatus!=LoanConfig.LoanAccountStatus.Active"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </div>
                                <div ng-switch="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanLateFee).TransactionId">
                                    <span ng-switch-when="-1">
                                        <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="lp.LateFee" ng-init="lp.LateFee=0" 
                                               ng-style="lp.cellStyleLateFee"/>
                                    </span>
                                    <span ng-switch-default>
                                        <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="lp.LateFee"
                                                ng-init="lp.LateFee=getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanLateFee).Amount" 
                                               ng-style="lp.cellStyleLateFee"/>
                                    </span>
                                </div>
                                <div>
                                    <input type="text"
                                           min="0"
                                           class="col-lg-1 col-md-1 col-sm-2 editable-input-number"
                                           ng-disabled="!lp.HasLoanLateFee || lp.LoanAccountStatus!=LoanConfig.LoanAccountStatus.Active"
                                           ng-model="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanLateFee).Amount"
                                           ng-change="singleTransactionLoan($index,getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanLateFee));calculateGrandTotal();"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </div>
                                <div ng-switch="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).TransactionId">
                                    <span ng-switch-when="-1">
                                        <input type="text"
                                                readonly="readonly"
                                                class="col-lg-1 col-md-1 col-sm-2"
                                                ng-model="lp.Exemption" ng-init="lp.Exemption=0"
                                                ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                ng-style="lp.cellStyleExemption" />
                                    </span>
                                    <span ng-switch-default>
                                        <input type="text"
                                                readonly="readonly"
                                                class="col-lg-1 col-md-1 col-sm-2"
                                                ng-model="lp.Exemption" 
                                               ng-init="lp.Exemption=getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).Amount"
                                                ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                               ng-style="lp.cellStyleExemption"  />
                                    </span>
                                </div>
                                <div ng-switch="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).TransactionId">
                                    <span ng-switch-when="-1">
                                        <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" step="0"
                                               ng-disabled="(roleId!=UserRole.Admin && roleId!=UserRole.RM )|| lp.OutstandingAmount!=0 || lp.LoanAccountStatus!=LoanConfig.LoanAccountStatus.Active  " ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                               ng-model="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).Amount"
                                               ng-init="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).Amount=0"
                                               ng-change="singleTransactionLoan($index,getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption));;calculateGrandTotal();"
                                               onkeypress="return event.charCode > 47 && event.charCode < 58" />
                                    </span>
                                    <span ng-switch-default>
                                        <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" step="0"
                                               ng-disabled="(roleId!=UserRole.Admin && roleId!=UserRole.RM)||lp.OutstandingAmount!=0 || lp.LoanAccountStatus!=LoanConfig.LoanAccountStatus.Active "
                                               ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                               ng-model="getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption).Amount"
                                               ng-change="singleTransactionLoan($index,getSingleTransaction(lp.SingleLoanTransactions,singleTransactionType.LoanExemption));;calculateGrandTotal();" 
                                               onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                    </span>
                                </div>
                                <div>
                                    <input type="text" 
                                           readonly="readonly" class="col-lg-1 col-md-1 col-sm-2"
                                           ng-model="lp.ExemptableAmount"
                                            ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset ng-hide="currentTransaction.SavingsTransactions==null">
                <h5><u>Savings Program</u></h5>
                <center>
                    <div ng-repeat="st in currentTransaction.SavingsTransactions">
                        <div style="color: red" ng-bind-html="st.errorMessage">{{st.errorMessage}}</div>
                        <div ng-repeat="sst in st.SingleSavingsTransaction">
                            <div style="color: red" ng-bind-html="sst.errorMessage">{{sst.errorMessage}}</div>
                            <div style="color: green" ng-bind-html="sst.warningMessage">{{sst.warningMessage}}</div>
                        </div>
                    </div>
                </center>
                <div class="col-lg-12 col-md-12 col-sm-12" style="width: 103%">
                    <div>
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Program</label>
                    </div>
                    <div>
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Balance</label>
                    </div>

                    <div>
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Deposited</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Withdrawn </label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Late Fee Received</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Interest</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Periodic Fee Recv.</label>
                    </div>
                    <div>
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Deposit</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Withdraw</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Late Fee</label>
                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">

                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Interest</label>

                    </div>
                    <div ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()">
                        <label class="col-lg-1 col-md-1 col-sm-2 vertical-line">Periodic Fee</label>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12" style="width: 103%">
                    <div ng-repeat="ssp in currentTransaction.SavingsTransactions">
                        <div class="row" ng-style="ssp.rowStyleS">
                            <div>
                                <input type="text" readonly="readonly" title="{{ssp.ProductName}}" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ProductShortName" />
                            </div>
                            <div>
                                <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Balance" />
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSDeposit).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" id="cbsDepositR{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" ng-init="ssp.Deposit=0" 
                                                   ng-style="ssp.cellStyleDeposit"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" id="cbsDepositRN{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" 
                                                   ng-init="ssp.Deposit=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSDeposit).Amount"
                                                   ng-style="ssp.cellStyleDeposit" />
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-when="4">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSDeposit).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" id="ltsDepositR{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" ng-init="ssp.Deposit=0" 
                                                   ng-style="ssp.cellStyleDeposit"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" id="ltsDepositRN{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" ng-init="ssp.Deposit=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSDeposit).Amount" 
                                                   ng-style="ssp.cellStyleDeposit"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-default>
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsDeposit).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" id="savingDepositR{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" ng-init="ssp.Deposit=0" 
                                                   ng-style="ssp.cellStyleDeposit"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" id="savingDepositRN{{$index}}" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.Deposit" ng-init="ssp.Deposit=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsDeposit).Amount" 
                                                   ng-style="ssp.cellStyleDeposit"/>
                                        </span>
                                    </span>
                                </span>
                            </div>

                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSWithDraw).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.TotaolWithdrawn" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.TotaolWithdrawn=0" 
                                                   ng-style="ssp.cellStyleWithdraw"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.TotaolWithdrawn" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.TotaolWithdrawn=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSWithDraw).Amount" 
                                                    ng-style="ssp.cellStyleWithdraw"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-default>
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsWithdraw).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.TotaolWithdrawn" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.TotaolWithdrawn=0" 
                                                    ng-style="ssp.cellStyleWithdraw"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.TotaolWithdrawn" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.TotaolWithdrawn=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsWithdraw).Amount" 
                                                    ng-style="ssp.cellStyleWithdraw"/>
                                        </span>
                                    </span>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSLateFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" 
                                                   readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" 
                                                   title="Mandatory Deposit Amount " ng-model="ssp.LateFee"
                                                    ng-init="ssp.LateFee=0" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                                    ng-style="ssp.cellStyleLateFee"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" title="Mandatory Deposit Amount " ng-model="ssp.LateFee"
                                                    ng-init="ssp.LateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSLateFee).Amount"
                                                    ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                                   ng-style="ssp.cellStyleLateFee"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-when="4">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSLateFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" 
                                                   title="Mandatory Deposit Amount " ng-model="ssp.LateFee" ng-init="ssp.LateFee=0" 
                                                   ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-style="ssp.cellStyleLateFee" />
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2"
                                                    title="Mandatory Deposit Amount " ng-model="ssp.LateFee"
                                                    ng-init="ssp.LateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSLateFee).Amount" 
                                                   ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                                   ng-style="ssp.cellStyleLateFee"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-default>
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingLateFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" title="Mandatory Deposit Amount " 
                                                   ng-model="ssp.LateFee" ng-init="ssp.LateFee=0" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                                   ng-style="ssp.cellStyleLateFee"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2"
                                                    title="Mandatory Deposit Amount " ng-model="ssp.LateFee"
                                                    ng-init="ssp.LateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingLateFee).Amount" 
                                                   ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-style="ssp.cellStyleLateFee" />
                                        </span>
                                    </span>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSInterest).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=0"
                                                   ng-style="ssp.cellStyleInterest" />
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSInterest).Amount"
                                                   ng-style="ssp.cellStyleInterest" />
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-when="4">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSInterest).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=0" 
                                                   ng-style="ssp.cellStyleInterest"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSInterest).Amount" 
                                                   ng-style="ssp.cellStyleInterest"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-default>
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsInterest).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=0" 
                                                   ng-style="ssp.cellStyleInterest"/>
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-model="ssp.ServiceCharge" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                   ng-init="ssp.ServiceCharge=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsInterest).Amount"
                                                   ng-style="ssp.cellStyleInterest" />
                                        </span>
                                    </span>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSPeriodicFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                                    ng-model="ssp.CollectedLateFee" ng-init="ssp.CollectedLateFee=0"
                                                   ng-style="ssp.cellStylePeriodicFee" />
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="ssp.CollectedLateFee"
                                                   ng-init="ssp.CollectedLateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSPeriodicFee).Amount" 
                                                   ng-style="ssp.cellStylePeriodicFee"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-when="4">
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSPeriodicFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="ssp.CollectedLateFee"
                                                    ng-init="ssp.CollectedLateFee=0"
                                                   ng-style="ssp.cellStylePeriodicFee" />
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="ssp.CollectedLateFee"
                                                   ng-init="ssp.CollectedLateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSPeriodicFee).Amount" 
                                                   ng-style="ssp.cellStylePeriodicFee"/>
                                        </span>
                                    </span>
                                </span>
                                <span ng-switch-default>
                                    <span ng-switch="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingPeriodicFee).TransactionId">
                                        <span ng-switch-when="-1">
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                                   ng-model="ssp.CollectedLateFee" ng-init="ssp.CollectedLateFee=0"
                                                   ng-style="ssp.cellStylePeriodicFee" />
                                        </span>
                                        <span ng-switch-default>
                                            <input type="text" readonly="readonly" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="ssp.CollectedLateFee"
                                                   ng-init="ssp.CollectedLateFee=getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingPeriodicFee).Amount" 
                                                   ng-style="ssp.cellStylePeriodicFee"/>
                                        </span>
                                    </span>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <input type="text" 
                                           id="cbsDeposit{{$index}}" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSDeposit).Amount" 
                                           ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSDeposit),ssp.ProductType);;calculateGrandTotal();" 
                                           ng-disabled="ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-when="4">
                                    <input type="text" id="ltsDeposit{{$index}}" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSDeposit).Amount" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSDeposit),ssp.ProductType);;calculateGrandTotal();"
                                           ng-disabled="ssp.isLTSAmountPaidCurrentMonth" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-default>
                                    <input type="text" id="savingsDeposit{{$index}}" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsDeposit).Amount" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsDeposit),ssp.ProductType);calculateGrandTotal();"
                                           ng-readonly="ssp.isLTSAmountPaidCurrentMonth && ssp.ProductType==SavingsConfig.SavingsProductType.LTS" 
                                           ng-disabled="ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSWithDraw).Amount"
                                           ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSWithDraw),ssp.ProductType);calculateGrandTotal();"
                                           ng-readonly="ssp.ProductType==SavingsConfig.SavingsProductType.LTS && roleId!=rootLevel.Admin" 
                                           ng-disabled="ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-when="4">
                                    <input type="number" min="0" class="col-lg-1 col-md-1 col-sm-2" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                           value="0"
                                           ng-readonly="true" />
                                </span>
                                <span ng-switch-default>
                                    <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsWithdraw).Amount"
                                           ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsWithdraw),ssp.ProductType);calculateGrandTotal();"
                                           ng-readonly="ssp.ProductType==SavingsConfig.SavingsProductType.LTS && roleId!=rootLevel.Admin" 
                                           ng-disabled="ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <input type="text" ng-disabled="!ssp.HasSavingsLateFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active" class="col-lg-1 col-md-1 col-sm-2 editable-input-number"
                                            ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSLateFee).Amount" 
                                           ng-change="calculateGrandTotal();"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58" 
                                           />
                                </span>
                                <span ng-switch-when="4">
                                    <input type="text" ng-disabled="!ssp.HasSavingsLateFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active" 
                                           class="col-lg-1 col-md-1 col-sm-2 editable-input-number" 
                                           ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSLateFee).Amount" ng-change="calculateGrandTotal();"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58" />
                                </span>
                                <span ng-switch-default>
                                    <input type="text" 
                                           ng-disabled="!ssp.HasSavingsLateFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active"
                                            class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingLateFee).Amount" ng-change="calculateGrandTotal();"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58" />
                                </span>

                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" 
                                           ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSInterest).Amount" 
                                           ng-disabled="true" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSInterest),ssp.ProductType);calculateGrandTotal();" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-when="4">
                                    <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number"
                                            ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                            ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSInterest).Amount"
                                            ng-disabled="true" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSInterest),ssp.ProductType);calculateGrandTotal();" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-default>
                                    <input type="text" min="0" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" 
                                           ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()"
                                            ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsInterest).Amount"
                                           ng-disabled="true" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingsInterest),ssp.ProductType);calculateGrandTotal();" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                            </div>
                            <div ng-switch="ssp.ProductType">
                                <span ng-switch-when="3">
                                    <input type="text" ng-disabled="!ssp.HasSavingsPeriodicFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active" class="col-lg-1 col-md-1 col-sm-2 editable-input-number"
                                            ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" 
                                           ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSPeriodicFee).Amount" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.CBSPeriodicFee),ssp.ProductType);calculateGrandTotal();" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                                <span ng-switch-when="4">
                                    <input type="text" ng-disabled="!ssp.HasSavingsPeriodicFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSPeriodicFee).Amount" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.LTSPeriodicFee),ssp.ProductType);calculateGrandTotal();"
                                           onkeypress="return event.charCode > 47 && event.charCode < 58" />
                                </span>
                                <span ng-switch-default>
                                    <input type="text" ng-disabled="!ssp.HasSavingsPeriodicFee || ssp.SavingsAccountStatus!=SavingsConfig.SavingsAccountStatus.Active" class="col-lg-1 col-md-1 col-sm-2 editable-input-number" ng-hide="currentTransaction.Process===TransactionProcess.Cheque.toString()" ng-model="getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingPeriodicFee).Amount" ng-change="singleTransactionSavings($index,getSingleTransaction(ssp.SingleSavingsTransaction,singleTransactionType.SavingPeriodicFee),ssp.ProductType);calculateGrandTotal();" 
                                           onkeypress="return event.charCode > 47 && event.charCode < 58"/>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <h5><u>Misc</u></h5>
                <div class="panel">
                    <div class="row">
                        <div class="col-lg-2 col-md-2 col-sm-12">
                            <label>Pass Book Fee</label>
                            <input type="number" readonly="readonly" ng-model="currentTransaction.PassBook" />
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12">
                            <label>Processing Fee</label>
                            <input type="number" readonly="readonly" ng-model="currentTransaction.ProcessingFee" />
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12 pull-right">
                            <label>Today's Collection</label>
                            <input type="number" readonly="readonly" ng-model="currentTransaction.TodayCollection" />
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-12 pull-right">
                            <label>Total Realizable</label>
                            <input type="number" readonly="readonly" ng-model="currentTransaction.NetTotal" />
                        </div>
                    </div>
                </div>
            </fieldset>
            <div class="danger" ng-show="hasNominee===false">
                <label style="color: red">
                    Nominee Information is missing for one or more savings/capital buildup saving account
                </label>
            </div>
        </form>
    </div>
</div>