<div class="row" ng-controller="salaryStructureAddController">
    <h5><i class="fa fa-asterisk required-icon"></i> Required field</h5>
    <div class="panel-body font-asa-11">
        <form angular-validator-submit="addSalaryStructure()" name="addSalaryStructureForm" class="form-horizontal" novalidate angular-validator>
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingGeneral">
                        <h4 class="panel-title">
                            <a role="button" data-toggle="collapse" href="#collapseGeneral" aria-expanded="true" aria-controls="collapseGeneral" onclick="accordionUtility.setCaret('gi')">
                                Basic Information<i class="fa fa-asterisk required-icon"></i>
                                <i id="gi-down" class="fa fa-caret-down"></i>
                                <i id="gi-up" class="fa fa-caret-up hide-caret"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseGeneral" class="panel-collapse in" role="tabpanel" aria-labelledby="headingGeneral" showHide="showHide">
                        <div class="panel-body">
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label for="branchId" class="col-md-4 col-sm-12">
                                            Branch <i class="fa fa-asterisk required-icon"></i>
                                        </label>
                                        <select tabindex="1" name="branchId"
                                                ng-model="salaryStructureToAdd.OfficeCode"
                                                class="width-asa form-control form-control-asa col-md-8 col-sm-12"
                                                ng-change="onBranchChange(salaryStructureToAdd.OfficeCode)"
                                                ng-options="branch.Value as branch.Name for branch in filters.Branches"
                                                id="branchId" placeholder="Branch"
                                                required>
                                            <option value="">--Select Branch--</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label for="employeeId" class="col-md-4 col-sm-12">
                                            Employee <i class="fa fa-asterisk required-icon"></i>
                                        </label>
                                        <select tabindex="1" name="employeeId"
                                                ng-model="salaryStructureToAdd.EmployeeId"
                                                class="width-asa form-control form-control-asa col-md-8 col-sm-12"
                                                ng-change="onEmployeeChange(salaryStructureToAdd.EmployeeId)"
                                                ng-options="employee.Value as employee.Name for employee in filters.Employees"
                                                id="employeeId" placeholder="Employee"
                                                required>
                                            <option value="">--Select employee--</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingBasic">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" href="#collapseBasic" aria-expanded="false" aria-controls="collapseBasic" onclick="accordionUtility.setCaret('bi')">
                                PayRoll Information <i class="fa fa-asterisk required-icon"></i>
                                <i id="bi-down" class="fa fa-caret-down"></i>
                                <i id="bi-up" class="fa fa-caret-up hide-caret"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseBasic" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingBasic" showHide="showHide">
                        <div class="panel-body">
                            <!--new DateTimePicker-->
                            <div class="col-lg-4 col-md-4 col-sm-4" style="position: relative">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label class="col-md-4 col-sm-12">
                                            Opening Date<i class="fa fa-asterisk required-icon"></i>
                                        </label>
                                        <div class="dropdown input-group date width-asa">
                                            <p class="input-group">
                                                <input ng-change="startDateValidator()"
                                                       readonly="readonly" class="form-control-asa full-width-asa" type="text" uib-datepicker-popup="{{format}}"
                                                       ng-model="salaryStructureToAdd.OpeningDate" is-open="popupStartDate.opened" datepicker-options="dateOptions" close-text="Close"
                                                       alt-input-formats="altInputFormats" />
                                                <span class="input-group-addon input-group-addon-asa">
                                                    <button type="button" ng-click="openStartDate()"><i class="fa fa-calendar"></i></button>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--<div class="col-lg-4 col-md-4 col-sm-6" style="position: relative">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label class="col-md-4 col-sm-12">
                                            Closing Date
                                        </label>
                                        <div class="dropdown input-group date width-asa">
                                            <p class="input-group">
                                                <input ng-change="endDateValidator()"
                                                       readonly="readonly" class="form-control-asa full-width-asa" type="text" uib-datepicker-popup="{{format}}"
                                                       ng-model="salaryStructureToAdd.ClosingDate" is-open="popupEndDate.opened" datepicker-options="dateOptions" close-text="Close"
                                                       alt-input-formats="altInputFormats" />
                                                <span class="input-group-addon input-group-addon-asa">
                                                    <button type="button" ng-click="openEndDate()"><i class="fa fa-calendar"></i></button>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                            <div class="col-lg-4 col-md-4 col-sm-6">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label for="eReason" class="col-md-4 col-sm-12">
                                            Reason For Setup <i class="fa fa-asterisk required-icon"></i>
                                        </label>
                                        <select tabindex="1" name="eBank"
                                                ng-model="salaryStructureToAdd.Reason"
                                                class="width-asa form-control form-control-asa col-md-8 col-sm-12"
                                                ng-options="reason.Value as reason.Name for reason in filters.Reasons"
                                                id="eReason" placeholder="Reasons"
                                                required>
                                            <option value="">--Select Reason--</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="form-group">
                                    <div class="form-inline">
                                        <label for="notes" class="col-lg-1 col-md-1 col-sm-2">
                                            Description <i class="fa fa-asterisk required-icon"></i>
                                        </label>
                                        <textarea ng-model="salaryStructureToAdd.Description"
                                                  class="form-control form-control-asa col-lg-8 col-md-8 width-asa-notes col-sm-12"
                                                  id="notes" placeholder="Description" rows="5"
                                                  name="notes"
                                                  required
                                                  required-message="'Field is required'"></textarea>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingSpecial">
                        <h4 class="panel-title">
                            <a class="collapsed" role="button" data-toggle="collapse" href="#collapseSpecial" aria-expanded="false" aria-controls="collapseSpecial" onclick="accordionUtility.setCaret('si')">
                                Salary & Allowance, Deduction Information <i class="fa fa-asterisk required-icon"></i>
                                <i id="si-down" class="fa fa-caret-down"></i>
                                <i id="si-up" class="fa fa-caret-up hide-caret"></i>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseSpecial" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSpecial" showHide="showHide">
                        <div class="panel-body">
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <h5>Salary & Allowance</h5>
                                <table class="table table-bordered table-hover table-asa">
                                    <thead>
                                        <tr>
                                            <th>S#</th>
                                            <th>Particulars</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="accountType in salaryStructureToAdd.allowanceAccountTypes">
                                            <td>{{$index + 1}}</td>
                                            <td>{{accountType.AccountTypeName}}</td>
                                            <td>
                                                <input class="from-control form-control-asa" type="number" min="0" onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57" ng-model="accountType.Amount" />
                                            </td>
                                        </tr>

                                    </tbody>

                                </table>

                                <!--Gross Salary: <input class="from-control form-control-asa" type="number"  readonly="readonly" value= {{getTotalAllowance()}} />-->


                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <h5>Deductions</h5>
                                <table class="table table-bordered table-hover table-asa">
                                    <thead>
                                        <tr>
                                            <th>S#</th>
                                            <th>Particulars</th>
                                            <th>Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="accountType in salaryStructureToAdd.deductionAccountTypes">
                                            <td>{{$index + 1}}</td>
                                            <td>{{accountType.AccountTypeName}}</td>
                                            <td>
                                                <input class="from-control form-control-asa" type="number" min="0" onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57" ng-model="accountType.Amount" />
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>

                                <!--Total Deductions: <input class="from-control form-control-asa" type="number" readonly="readonly" value= {{getTotalDeduction()}} />-->

                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-6">
                                Gross Salary: &nbsp &nbsp &nbsp<input class="from-control form-control-asa" type="number" readonly="readonly" value={{getTotalAllowance()}} /> <br/>
                                Total Deductions: <input class="from-control form-control-asa" type="number" readonly="readonly" value={{getTotalDeduction()}} > <br />
                                Net Salary :<input class="form-control form-control-asa" type="number" readonly="readonly" value={{netPayableSalary()}}>
                            </div>
                        </div>
                    </div>





                    <div class="row">
                        <div ng-if="addProductForm.$valid === false && addProductForm.$dirty === true">
                            <p class="form-validation-message">Validation failed, one or more required field is missing</p>
                        </div>
                        <button type="submit" style="margin-top: 10px;" class="btn btn-primary" ng-click="onSubmitForm()">
                            Create Salary Structure
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#accordion').find('.collapse.in').collapse('hide');
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>
