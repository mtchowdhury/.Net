<div class="panel panel-default panel-primary" ng-controller="transferController">
    <div class="panel-heading panel-title">
        Group/Member Transfer
    </div>
    <div style="padding-top: 10px;"></div>
    <form style="min-height: 250px;" ng-submit="transfer()" name="SaveTransactionForm" class="form-horizontal" novalidate angular-validator>
        <div class="row">
            <div class="col-sm-12 col-md-3 col-lg-3">
                <label for="disbursedate" class="col-lg-7 col-md-7 col-sm-12" style="font-size: 12px">
                    Transfer Date<i class="fa fa-asterisk required-icon"></i>
                </label>
                <input tabindex="0" type="text" name="disbursedate" style="width: 32%"
                           ng-model="transfer.TransferDate" class="form-control form-control-asa col-md-8 col-sm-12"
                           id="disbursedate" validate-on="blur" readonly="readonly">
                <!--<div tabindex="1" class="dropdown input-group date" style="width: 40%">
                    <a class="dropdown-toggle" id="disbursedate" role="button" data-toggle="dropdown" data-target="#" href="#">
                        <div class="input-group date-input-group">
                            <input type="text" date-time-input="DD-MM-YYYY" class="form-control-asa full-width-asa" name="disbursedate" ng-model="transfer.TransferDate" ng-change="getSchedule()" readonly="readonly">

                        </div>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <datetimepicker ng-model="transfer.TransferDate" data-datetimepicker-config="{ startView:'day', minView:'day',dropdownSelector: '#disbursedate' }"
                                        data-before-render="beforeStartDateRender($dates)" />
                    </ul>
                </div>-->
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="form-group ng-binding" style="padding-left: 17px; font-size: 12px">
                    <label for="ReceivingDistrictId" class="col-md-6 col-sm-12">
                        Receiving District<i class="fa fa-asterisk required-icon"></i>
                    </label>
                    <select id="ReceivingDistrictId"
                            style="height: 21px; width: 150px;"
                            class="form-control form-control-asa form-control-asa-select-box-padding col-md-6 col-sm-12"
                            ng-model="transfer.ReceivingDistrictId"
                            ng-change="getBranchsByDistrict()"
                            ng-options="districtList.Value as districtList.Name for districtList in districtListList"></select>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12">
                <div class="form-group ng-binding" style="padding-left: 17px; font-size: 12px">
                    <label for="ReceivingBranchId" class="col-md-6 col-sm-12">
                        Receiving Branch<i class="fa fa-asterisk required-icon"></i>
                    </label>
                    <select id="ReceivingBranchId"
                            style="height: 21px; width: 150px"
                            class="form-control form-control-asa form-control-asa-select-box-padding col-md-6 col-sm-12"
                            ng-model="transfer.ReceivingBranchId"
                            ng-options="branch.Value as branch.Name for branch in branchList"></select>
                </div>
            </div>
            <button type="button" ng-click="transferGroup()">Transfer </button>
            <button type="button" ng-click="getTransferData()">Load </button>
            
        </div>
        <div class="row">
            <div class="col-lg-1 col-md-1 col-sm-12"></div>
            <div class="col-lg-10 col-md-10 col-sm-12">
                <!--<table style="width: 98%; display: block;"
                           data-page-length='20' class="table table-striped table-hover table-asa">-->
                <table style="width: 100%; padding-bottom: 10px"
                       class="pro-table table-striped table-bordered table-hover table-asa">
                    <thead>
                        <tr>
                            <th><label><input type="checkbox" ng-disabled="!IsAllMemberSelectable" ng-model="allMembers" ng-change="ChangeAllCheck()" /></label></th>
                            <th>P#</th>
                            <th>Member Name</th>
                            <th>Disbursed</th>
                            <th>Outstanding</th>
                            <th>Overdue</th>
                            <th>Savings</th>
                            <th>LTS</th>
                            <th>CBS</th>
                            <th>Receiving District</th>
                            <th>Receiving Branch</th>
                            <th>Transfer Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="member in transfer.AmmsTransferReceiveMembers track by $index" ng-style="changeCssStyle(account.IsTransferable)">
                            <td><label><input type="checkbox"
                                              ng-change="UpdateTotalPrice()"
                                              ng-disabled="member.TransferStatus == 1 || 
                                                                member.MemberStatus !== MemberConfig.MemberStatus.Active ||
                                                                (member.OutstandingAmount === 0 && member.SavingsBalance ===0  && 
                                                                    member.LTSBalance ===0 && member.CbsBalance ===0) ||
                                                                    member.noActiveAccounts"
                                              ng-model="member.IsChecked"/></label></td>
                            <td>{{member.PassBookNo}}</td>
                            <td ng-if="member.MemberStatus === MemberConfig.MemberStatus.Active" ng-click="setModaldata(member)" data-toggle="modal" data-target="#receiveModalHorizontal">
                                <a href="" title="Show Details">{{member.MemberName}} </a>
                            </td>
                            <td ng-if="member.MemberStatus !== MemberConfig.MemberStatus.Active" style="color: black">{{member.MemberName}} (Inactive)</td>
                            <td>{{member.DisburseAmount}}</td>
                            <td>{{member.OutstandingAmount}}</td>
                            <td>{{member.OverdueAmount}}</td>
                            <td>{{member.SavingsBalance}}</td>
                            <td>{{member.LTSBalance}}</td>
                            <td>{{member.CbsBalance}}</td>
                            <td>{{member.ReceivingDistrictName}}</td>
                            <td>{{member.ReceivingBranchName}}</td>
                            <td ng-if="member.TransferStatus == 1" style="background-color: #cdffcc">Initiated</td>
                            <td ng-if="member.TransferStatus == 3" style="background-color: #ffdecc">Cancelled</td>
                            <td ng-if="member.TransferStatus == 4" style="background-color: #ffdecc">Rejected</td>
                            <td ng-if="member.TransferStatus != 1 && member.TransferStatus != 3 && member.TransferStatus != 4"> --- </td>
                            <td><span ng-if="member.TransferStatus == 1" ng-click="cancelMemberTransfer(member)">
                                    <i class="fa fa-times asa-icon-DELETE" title="DELETE"></i>
                                </span></td>
                            <!--<td ng-if="member.TransferStatus == 1"><button type="button" ng-click="cancelMemberTransfer(member)"> Cancel </button></td>-->
                            <!--<td ng-if="member.TransferStatus != 1"> --- </td>-->
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td>Total</td>
                         
                            <td>{{TotalDisburseAmount}}</td>
                            <td>{{TotalOutstandingAmount}}</td>
                            <td>{{TotalOverdueAmount}}</td>
                            <td>{{TotalSavingsBalance}}</td>
                            <td>{{TotalLTSBalance}}</td>
                            <td>{{TotalCbsBalance}}</td>
                            <td></td>
                            <td></td>
                            <td></td>
                          
                            <td>
                               
                            </td>
                            <!--<td ng-if="member.TransferStatus == 1"><button type="button" ng-click="cancelMemberTransfer(member)"> Cancel </button></td>-->
                            <!--<td ng-if="member.TransferStatus != 1"> --- </td>-->
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </form>
    <div class="modal fade" id="receiveModalHorizontal" tabindex="-1" role="dialog"
         aria-labelledby="receiveMember" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <button type="button" class="close"
                            data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="receiveModalLabel">
                        Member Details
                    </h4>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">


                    <div class="form-group col-sm-12 col-md-12  alert-warning" style="margin-bottom: 10px;padding-bottom: 10px">
                        <h5>  <b> {{MemberName}} </b></h5>
                        <div class="row panel  panel-default panel-primary" style="margin-bottom: 1px">

                            <fieldset>
                                <div class="panel-heading panel-title">
                                    Loan Accounts
                                </div>



                                <div class="col-lg-12 col-md-12 col-sm-12  beta">
                                    <table style="width: 100%; margin-bottom: 5px"
                                           class="pro-table table-striped table-bordered table-hover table-asa">
                                        <thead>
                                            <tr>
                                                <th>SL #</th>
                                                <th>Program Name</th>
                                                <th>Duration</th>
                                                <th>Installment Type</th>
                                                <th>Disburse Date</th>
                                                <th>Disbursed Amount</th>
                                                <th>Outstanding Amount</th>
                                                <th>Overdue Amount</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-if="account.AccountTypeId == 1" ng-repeat="account in accounts track by $index">
                                                <td>{{$index +1 }}</td>
                                                <td>{{account.Programname}}</td>
                                                <td ng-if="account.Duration !== 0">{{account.Duration}}</td>
                                                <td ng-if="account.Duration === 0"> --- </td>
                                                <td>{{account.InstallmentType}}</td>
                                                <td>{{account.DisburseDate}}</td>
                                                <td>{{account.DisburseAmount}}</td>
                                                <td>{{account.OutstandingAmount}}</td>
                                                <td>{{account.OverDueAmount}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>


                            </fieldset>
                        </div>

                        <div class="row panel panel-default panel-primary" style="margin-bottom: 1px">
                            <fieldset>

                                <div class="panel-heading panel-title">
                                    Savings/Security Accounts
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 font-asa-12">
                                    <table style="width: 100%; margin-bottom: 5px"
                                           class="pro-table table-striped table-bordered table-hover table-asa beta">
                                        <thead>
                                            <tr>

                                                <th>SL #</th>
                                                <th>Program Name</th>
                                                <th>Opening Date</th>
                                                <th>Duration</th>
                                                <th>Deposit Amount</th>
                                                <th>Balance Amount</th>


                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-if="account.AccountTypeId != 1" ng-repeat="account in accounts track by $index">

                                                <td>{{$index +1 }}</td>
                                                <td>{{account.Programname}}</td>
                                                <td>{{account.SavingsOpeningDate}}</td>
                                                <td ng-if="account.Duration !== 0">{{account.Duration}}</td>
                                                <td ng-if="account.Duration === 0"> --- </td>
                                                <td>{{account.SavingsDepositAmount}}</td>
                                                <td>{{account.SavingsBalance}}</td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>


                            </fieldset>
                        </div>




                        <div ng-if="validationBool" style="padding-bottom: 20px">
                            <label class="alert-danger fa-align-center pull-left"> {{validationText}} </label>
                        </div>
                    </div>



                    <!-- Modal Footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default"
                                data-dismiss="modal">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>

<!--<script>
    $(document).ready(function () {
        $('#accordion').find('.collapse.in').collapse('hide');
        //$('[data-toggle="tooltip"]').tooltip();
        $("th").tooltip({ container: 'body' });
        $("td").tooltip({ container: 'body' });
        //$(selector).tooltip({ container: 'body' });
    });
</script>-->
