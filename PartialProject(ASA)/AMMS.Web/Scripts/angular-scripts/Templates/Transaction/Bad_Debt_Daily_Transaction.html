<div class="row panel panel-default panel-primary" ng-controller="BadDebtDailyTransactionController">
    <div class="panel-heading panel-title">
        Daily Transactions
    </div>
    <h5><i class="fa fa-asterisk required-icon"></i> Required field</h5>

    <div class="panel-body font-asa-11">

        <form angular-validator-submit="saveDailyTransaction()" name="dailyTransactionBad" class="form-horizontal" novalidate angular-validator>

        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-12 form-group ">
                <div class="form-group">
                    <!--<div class="form-inline">
            <label for="tdate" class="col-lg-5 col-md-5 col-sm-12">
                Date <i class="fa fa-asterisk required-icon"></i>
            </label>
            <div class="dropdown input-group date col-lg-5 col-md-5 col-sm-12">
                <a class="dropdown-toggle" id="tdate" role="button" data-toggle="dropdown" data-target="#" href="#">
                    <div class="input-group date-input-group">
                        <input type="text" name="tdate" readonly="readonly" date-time-input="DD-MM-YYYY" class="form-control-asa full-width-asa" ng-model="currentTransaction.TransactionDate" ng-init="currentTransaction.TransactionDate=branchWorkingDay"
                               is-open="false" required style="margin-left: -40px;">
                        <span class="input-group-addon input-group-addon-asa"><i class="fa fa-calendar" style="margin-left: -40px;"></i></span>
                    </div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <datetimepicker ng-model="currentTransaction.TransactionDate" data-datetimepicker-config="{ startView:'day', minView:'day',dropdownSelector: '#sdate' }" required
                                    data-before-render="beforeDateRender($dates)" ng-change="isHolidayOrOffDay(currentTransaction.TransactionDate)"/>
                </ul>
            </div>
        </div>-->
                    <div class="form-inline">
                        <label for="tdate" class="col-lg-5 col-md-5 col-sm-12">
                            Date <i class="fa fa-asterisk required-icon"></i>
                        </label>
                        <div class="dropdown input-group date col-lg-5 col-md-5 col-sm-12">
                            <p class="input-group">
                                <input readonly="readonly" class="form-control-asa full-width-asa" type="text" uib-datepicker-popup="{{format}}"
                                       ng-change="isHolidayOrOffDay(transactionDate)"
                                       ng-model="transactionDate" is-open="popup.opened" datepicker-options="dateOptions" required required-message="'opening date is required'" close-text="Close"
                                       alt-input-formats="altInputFormats" style="margin-left: -40px; width: 100px;"/>
                                <span class="input-group-addon input-group-addon-asa"  style="margin-left: -40px;">
                                    <button type="button" ng-click="open()"><i class="fa fa-calendar"></i></button>
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-12">
                <div class="form-group">
                    <div class="form-inline">
                        <label class="col-lg-7 col-md-7 col-sm-12">Process<i class="fa fa-asterisk required-icon"></i></label>
                        <select ng-model="currentTransaction.PaymentMethodId" class="col-lg-6 col-md-6 col-sm-12 form-control form-control-asa" style="margin-left: -20px;"
                                ng-options="transactionProcess.Value as transactionProcess.Name for transactionProcess in transactionProcessList"
                                ></select>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" type="button" ng-click="getMemberDailyTransaction(selectedMenu.Id,currentTransaction.TransactionDate)">
                Load
            </button>
            <button type="submit" class="btn btn-primary" ng-click="onSubmitForm()" ng-show="btnSave">
                Save
            </button>


        </div>
            <div class="row" ng-if="currentTransaction.PaymentMethodId==='2'">
                <div class="form-group">
                    <div class="form-inline">
                        <label class="col-lg-1 col-md-1 col-sm-12">
                            Bank
                        </label>
                        <select ng-model="currentTransaction.BankAccountId" class="col-lg-3 col-md-3 col-sm-12 form-control form-control-asa" style="margin-left: -35px;"
                                ng-options="bankAccount.Id as bankAccount.BankName+' ('+( bankAccount.AccountName)+')' for bankAccount in bankAccounts">
                            <option value="">Select Bank</option>
                        </select>
                        <label class="col-lg-1 col-md-1 col-sm-12">
                            Cheque
                        </label>
                        <input type="text" ng-model="currentTransaction.ChequeNo" placeholder="Cheque Number" class="col-lg-4 col-md-4 col-sm-12 form-control form-control-asa" />
                        <label class="col-lg-2 col-md-2 col-sm-12">
                            Is Account Payable?
                        </label>
                        <input type="checkbox" ng-model="currentTransaction.IsAccountPayable"
                               ng-true-value="true" ng-false-value="false">
                    </div>
                </div>
            </div>

            <fieldset>
               
                <center>
                    <div>
                        <div style="color: green" ng-bind-html="warningMessageLoan" ng-init="warningMessageLoan=''">{{warningMessageLoan}}</div>
                        <div style="color: red" ng-bind-html="errorMessageLoan" ng-init="errorMessageLoan=''">{{errorMessageLoan}}</div>
                    </div>
                </center>

                <table style="width: 100%;background-color:#e6f7ff">
                    <tr>
                        <th>Program</th>
                        <th>Outstanding Amount</th>
                        <th>Todays Collection</th>
                        <th> Collection</th>
                    </tr>
                    <tr ng-repeat ="accountTransaction in currentTransaction.BadDebtTransactions">
                        <td>{{accountTransaction.LoanProductName}}</td>
                        <td>{{accountTransaction.OutstandingAmount}}</td>
                        <td>{{accountTransaction.TodaysCollectedAmount}}</td>
                        <td>
                            <input type='number'
                                   ng-model="accountTransaction.TodaysCollectableAmount"
                                   ng-change="setTransaction()"
                                   validator="{{TransactionValidator(accountTransaction) === true}}"
                                   validate-on="dirty"
                                   data-toggle="tooltip"
                                   invalid-message="{{TransactionValidator(accountTransaction)}}.message"
                                   
                            />
                        </td>
                    </tr>
                    
                </table>
            </fieldset>
           
            <fieldset>
                <div class="panel">
                    <div class="row">
                        <div class="col-lg-2 col-md-2 col-sm-12 pull-right">
                            <label>Grand Total</label>
                            <input type="number" readonly="readonly" ng-model="grandTotal" />
                        </div>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</div>